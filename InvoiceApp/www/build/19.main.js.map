{"version":3,"sources":["../../src/pages/work/depot-list/depot-list.module.ts","../../src/pages/work/depot-list/depot-list.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACH;AAa7C,IAAa,mBAAmB;IAAhC;IAAkC,CAAC;IAAD,0BAAC;AAAD,CAAC;AAAtB,mBAAmB;IAX/B,sFAAQ,CAAC;QACN,YAAY,EAAE;YACV,kEAAa;SAChB;QACD,OAAO,EAAE;YACL,sEAAe,CAAC,QAAQ,CAAC,kEAAa,CAAC;SAC1C;QACD,OAAO,EAAE;YACL,kEAAa;SAChB;KACJ,CAAC;GACW,mBAAmB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;ACfU;AACyC;AACrB;AACF;AAE5D;;;;;EAKE;AAMF,IAAa,aAAa;IAQtB,uBAAmB,OAAsB,EAC7B,WAAwB,EACxB,UAAsB,EACvB,SAAoB,EACpB,QAAwB;QAJhB,YAAO,GAAP,OAAO,CAAe;QAC7B,gBAAW,GAAX,WAAW,CAAa;QACxB,eAAU,GAAV,UAAU,CAAY;QACvB,cAAS,GAAT,SAAS,CAAW;QACpB,aAAQ,GAAR,QAAQ,CAAgB;QAXnC,UAAK,GAAW,MAAM,CAAC;QAKvB,aAAQ,GAAY,KAAK,CAAC,CAAC,iBAAiB;QAOxC,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC;QAC5B,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;QAClB,IAAI,CAAC,OAAO,EAAE,CAAC;IAEnB,CAAC;IAED,sCAAc,GAAd;QACI,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YACjC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;YACrB,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC;QACxB,CAAC;IACL,CAAC;IAED,+BAAO,GAAP;QAAA,iBAOC;QANG,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,UAAC,IAAI;YACrC,KAAI,CAAC,SAAS,GAAG,KAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YAC/D,KAAI,CAAC,KAAK,GAAG,KAAI,CAAC,SAAS,CAAC;QAChC,CAAC,CAAC,CAAC,KAAK,CAAC,UAAC,GAAG;YACT,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACvB,CAAC,CAAC,CAAC;IACP,CAAC;IAED,+BAAO,GAAP;QAAA,iBA4BC;QA3BG,IAAI,MAAM,GAAG;YACT,EAAE,IAAI,EAAE,UAAU,EAAE,WAAW,EAAE,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAE;YAC5D,EAAE,IAAI,EAAE,YAAY,EAAE,WAAW,EAAE,QAAQ,EAAE;SAChD,CAAC;QACF,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,EAAE,EAAE,MAAM,EAAE,MAAM,EAAE,CAAC,UAAC,IAAI;YAClD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;gBACrC,IAAI,CAAC,MAAM,CAAC,GAAG,KAAK,CAAC;gBACrB,KAAI,CAAC,WAAW,CAAC,SAAS,CAAC,cAAc,CAAC,CAAC;YAC/C,CAAC;YAAC,IAAI,CAAC,CAAC;gBACJ,IAAI,QAAQ,GAAY,KAAK,CAAC;gBAC9B,GAAG,CAAC,CAAa,UAAc,EAAd,UAAI,CAAC,SAAS,EAAd,cAAc,EAAd,IAAc;oBAA1B,IAAI,IAAI;oBACT,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;wBACjC,QAAQ,GAAG,IAAI,CAAC;wBAChB,KAAK,CAAC;oBACV,CAAC;iBACJ;gBACD,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;oBACX,IAAI,CAAC,MAAM,CAAC,GAAG,KAAK,CAAC;oBACrB,KAAI,CAAC,WAAW,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;gBAC3C,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACJ,KAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;gBACnB,CAAC;YAGL,CAAC;QAEL,CAAC,CAAC,CAAC;IACP,CAAC;IAED,2BAAG,GAAH,UAAI,IAAI;QAAR,iBAUC;QATG,IAAI,GAAG,GAAG;YACN,UAAU,EAAE,IAAI,CAAC,QAAQ;YACzB,YAAY,EAAE,IAAI,CAAC,UAAU;SAChC,CAAC;QACF,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,IAAI,CAAC;YACpC,KAAI,CAAC,OAAO,EAAE,CAAC;QACnB,CAAC,CAAC,CAAC,KAAK,CAAC,UAAC,GAAG;YACT,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACvB,CAAC,CAAC,CAAC;IACP,CAAC;IAED,gCAAQ,GAAR,UAAS,IAAI;QAAb,iBA8BC;QA5BG,MAAM;QACN,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;YAChB,IAAI,KAAK,GAAG;gBACR,QAAQ,EAAE,IAAI,CAAC,QAAQ;gBACvB,UAAU,EAAE,IAAI,CAAC,UAAU;aAC9B;YACD,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;YAC7B,MAAM,CAAC;QACX,CAAC;QAED,MAAM;QACN,IAAI,MAAM,GAAG;YACT,EAAE,IAAI,EAAE,YAAY,EAAE,WAAW,EAAE,IAAI,CAAC,UAAU,EAAE;SACvD,CAAC;QACF,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,EAAE,EAAE,MAAM,EAAE,MAAM,EAAE,CAAC,UAAC,IAAI;YAClD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;gBACnB,IAAI,CAAC,MAAM,CAAC,GAAG,KAAK,CAAC;gBACrB,KAAI,CAAC,WAAW,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;YAC1C,CAAC;YAAC,IAAI,CAAC,CAAC;gBACJ,IAAI,GAAG,GAAG,+BAA+B,GAAG,IAAI,CAAC,UAAU,GAAG,oBAAoB,GAAG,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;gBACzG,KAAI,CAAC,UAAU,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC;oBAClC,KAAI,CAAC,OAAO,EAAE,CAAC;gBACnB,CAAC,CAAC,CAAC,KAAK,CAAC,UAAC,GAAG;oBACT,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBACvB,CAAC,CAAC,CAAC;YACP,CAAC;QACL,CAAC,CAAC,CAAC;IAEP,CAAC;IAED,+BAAO,GAAP;QAAA,iBAWC;QAVG,IAAI,KAAK,GAAQ,EAAE,CAAC;QACpB,GAAG,CAAC,CAAa,UAAU,EAAV,SAAI,CAAC,KAAK,EAAV,cAAU,EAAV,IAAU;YAAtB,IAAI,IAAI;YACT,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;gBACtF,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACrB,CAAC;SACJ;QACD,qBAAqB;QACrB,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC;YACvB,KAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACvB,CAAC,CAAC,CAAC;IACP,CAAC;IACD,+BAAO,GAAP;QACI,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC;IAChC,CAAC;IAIL,oBAAC;AAAD,CAAC;AA/HY,aAAa;IALzB,uFAAS,EAAE;IACX,wFAAS,CAAC;QACP,QAAQ,EAAE,iBAAiB;OACG;KACjC,CAAC;qFAS2C;QAChB,2EAAW;QACZ,iEAAU;QACZ,qEAAS;QACV,UAAc;AAmHtC;SA/HY,aAAa,gB","file":"19.main.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { DepotListPage } from './depot-list';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        DepotListPage,\r\n    ],\r\n    imports: [\r\n        IonicPageModule.forChild(DepotListPage),\r\n    ],\r\n    exports: [\r\n        DepotListPage\r\n    ]\r\n})\r\nexport class DepotListPageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/work/depot-list/depot-list.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage,NavController, NavParams, ViewController } from 'ionic-angular';\r\nimport { UtilService } from '../../../providers/util-service';\r\nimport { SqlService } from \"../../../providers/sql-service\";\r\n\r\n/*\r\n  Generated class for the DepotList page.\r\n\r\n  See http://ionicframework.com/docs/v2/components/#navigation for more info on\r\n  Ionic pages and navigation.\r\n*/\r\n@IonicPage()\r\n@Component({\r\n    selector: 'page-depot-list',\r\n    templateUrl: 'depot-list.html'\r\n})\r\nexport class DepotListPage {\r\n    title: string = \"仓库管理\";\r\n    items: any;\r\n    placeholder: string;\r\n    myInput: string;\r\n    totalData: any;\r\n    isChoose: boolean = false; //用于判断是否是选择仓库返回值用\r\n\r\n    constructor(public navCtrl: NavController,\r\n        private utilService: UtilService,\r\n        private sqlService: SqlService,\r\n        public navParams: NavParams,\r\n        public viewCtrl: ViewController) {\r\n        this.placeholder = \"请输入关键字\";\r\n        this.myInput = \"\";\r\n        this.getData();\r\n\r\n    }\r\n\r\n    ionViewDidLoad() {\r\n        if (this.navParams.get(\"isChoose\")) {\r\n            this.isChoose = true;\r\n            this.title = \"选择仓库\";\r\n        }\r\n    }\r\n\r\n    getData() {\r\n        this.sqlService.query('depot').then((data) => {\r\n            this.totalData = this.utilService.sqliteToArrqy(data.res.rows);\r\n            this.items = this.totalData;\r\n        }).catch((err) => {\r\n            console.error(err);\r\n        });\r\n    }\r\n\r\n    addItem() {\r\n        let inputs = [\r\n            { name: 'depot_no', placeholder: '请输入仓库编号', type: 'number' },\r\n            { name: 'depot_name', placeholder: '请输入仓库名' }\r\n        ];\r\n        this.utilService.showPrompt('', '新增仓库', inputs, ((data) => {\r\n            if (!data.depot_no || !data.depot_name) {\r\n                data['flag'] = false;\r\n                this.utilService.showToast('仓库编号和仓库名不能为空');\r\n            } else {\r\n                let isRepeat: boolean = false;\r\n                for (let item of this.totalData) {\r\n                    if (item.depot_no == data.depot_no) {\r\n                        isRepeat = true;\r\n                        break;\r\n                    }\r\n                }\r\n                if (isRepeat) {\r\n                    data['flag'] = false;\r\n                    this.utilService.showToast('此编号仓库已存在');\r\n                } else {\r\n                    this.add(data);\r\n                }\r\n\r\n\r\n            }\r\n\r\n        }))\r\n    }\r\n\r\n    add(data) {\r\n        let obj = {\r\n            'depot_no': data.depot_no,\r\n            'depot_name': data.depot_name\r\n        };\r\n        this.sqlService.save('depot', obj).then(() => {\r\n            this.getData();\r\n        }).catch((err) => {\r\n            console.error(err);\r\n        });\r\n    }\r\n\r\n    editItem(item) {\r\n\r\n        //选择仓库\r\n        if (this.isChoose) {\r\n            let store = {\r\n                store_no: item.depot_no,\r\n                store_name: item.depot_name\r\n            }\r\n            this.viewCtrl.dismiss(store);\r\n            return;\r\n        }\r\n\r\n        //更改仓库\r\n        let inputs = [\r\n            { name: 'depot_name', placeholder: item.depot_name }\r\n        ];\r\n        this.utilService.showPrompt('', '编辑仓库', inputs, ((data) => {\r\n            if (!data.depot_name) {\r\n                data['flag'] = false;\r\n                this.utilService.showToast('仓库名不能为空');\r\n            } else {\r\n                let sql = \"update depot set depot_name='\" + data.depot_name + \"' where depot_no='\" + item.depot_no + \"'\";\r\n                this.sqlService.execSql(sql, []).then(() => {\r\n                    this.getData();\r\n                }).catch((err) => {\r\n                    console.error(err);\r\n                });\r\n            }\r\n        }))\r\n\r\n    }\r\n\r\n    onInput() {\r\n        let array: any = [];\r\n        for (let data of this.items) {\r\n            if (data.user_no.indexOf(this.myInput) >= 0 || data.username.indexOf(this.myInput) >= 0) {\r\n                array.push(data);\r\n            }\r\n        }\r\n        //console.log(array);\r\n        this.utilService.refreshUI(() => {\r\n            this.items = array;\r\n        });\r\n    }\r\n    onClear() {\r\n        this.items = this.totalData;\r\n    }\r\n\r\n\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/work/depot-list/depot-list.ts"],"sourceRoot":""}