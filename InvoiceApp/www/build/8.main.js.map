{"version":3,"sources":["../../src/pages/work/stk-log-list/stk-log-list.module.ts","../../src/pages/work/stk-log-list/stk-log-list.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACA;AAahD,IAAa,oBAAoB;IAAjC;IAAmC,CAAC;IAAD,2BAAC;AAAD,CAAC;AAAvB,oBAAoB;IAXhC,sFAAQ,CAAC;QACN,YAAY,EAAE;YACV,qEAAc;SACjB;QACD,OAAO,EAAE;YACL,sEAAe,CAAC,QAAQ,CAAC,qEAAc,CAAC;SAC3C;QACD,OAAO,EAAE;YACL,qEAAc;SACjB;KACJ,CAAC;GACW,oBAAoB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;ACfS;AACyB;AAEP;AAE5D;;;;EAIE;AAMF,IAAa,cAAc;IAMzB,wBACS,OAAsB,EACtB,SAAoB,EACnB,OAAmB;QAFpB,YAAO,GAAP,OAAO,CAAe;QACtB,cAAS,GAAT,SAAS,CAAW;QACnB,YAAO,GAAP,OAAO,CAAY;QAP7B,UAAK,GAAU,EAAE,CAAC;QAClB,cAAS,GAAW,EAAE,CAAC;IAOnB,CAAC;IAEL,uCAAc,GAAd;QACE,IAAI,CAAC,OAAO,EAAE,CAAC;IACjB,CAAC;IAED,gCAAO,GAAP,UAAQ,QAAyB;QAAjC,iBAeC;QAfO,2CAAyB;QAC/B,IAAI,GAAG,GAAG,iOAIY,CAAC;QAEvB,EAAE,CAAC,CAAC,QAAQ,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;YAC/B,IAAI,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC;YACzB,GAAG,IAAI,2HACsD,CAAC,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;QACrF,CAAC;QACD,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,cAAI;YACtC,KAAI,CAAC,KAAK,GAAG,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAC/B,CAAC,CAAC,CAAC;IACL,CAAC;IAED,iCAAQ,GAAR,UAAS,KAAK;QAAd,iBASC;QARC,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC;YAAC,MAAM,CAAC;QACtC,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC,SAAS,CAAC;QACjC,UAAU,CAAC;YACT,EAAE,CAAC,CAAC,KAAK,CAAC,SAAS,IAAI,KAAI,CAAC,SAAS,CAAC,CAAC,CAAC;gBACtC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;gBAC1B,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YACrB,CAAC;QACH,CAAC,EAAE,GAAG,CAAC,CAAC;IACV,CAAC;IACH,qBAAC;AAAD,CAAC;AA3CY,cAAc;IAL1B,uFAAS,EAAE;IACX,wFAAS,CAAC;QACT,QAAQ,EAAE,mBAAmB;OACG;KACjC,CAAC;yEAQ+B;QACX,0EAAS;QACV,UAAU;AAkC9B;SA3CY,cAAc,iB","file":"8.main.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { StkLogListPage } from './stk-log-list';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        StkLogListPage,\r\n    ],\r\n    imports: [\r\n        IonicPageModule.forChild(StkLogListPage),\r\n    ],\r\n    exports: [\r\n        StkLogListPage\r\n    ]\r\n})\r\nexport class StkLogListPageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/work/stk-log-list/stk-log-list.module.ts","import { Component } from '@angular/core';\r\nimport {IonicPage, NavController, NavParams } from 'ionic-angular';\r\n\r\nimport { SqlService } from '../../../providers/sql-service';\r\n\r\n/*\r\n  进出仓明细表\r\n  wudefeng\r\n  2017-05-19\r\n*/\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-stk-log-list',\r\n  templateUrl: 'stk-log-list.html'\r\n})\r\nexport class StkLogListPage {\r\n\r\n  items: any[] = [];\r\n  searchKey: string = \"\";\r\n  inputTime: any;\r\n\r\n  constructor(\r\n    public navCtrl: NavController,\r\n    public navParams: NavParams,\r\n    private sqlHelp: SqlService\r\n  ) { }\r\n\r\n  ionViewDidLoad() {\r\n    this.getData();\r\n  }\r\n\r\n  getData(isSearch: boolean = false) {\r\n    let sql = `select a.*,b.depot_name as store_name,c.good_name \r\n               from stk_in_out_dtl a \r\n               join depot b on a.store_no = b.depot_no\r\n               join good c on a.good_no=c.good_no\r\n               where 1=1 `;\r\n\r\n    if (isSearch && this.searchKey) {\r\n      let val = this.searchKey;\r\n      sql += ` and (a.good_no like '%?%' or c.good_name like '%?%' \r\n               or b.depot_name like '%?%' or a.bill_no like '%?%')`.replace(/\\?/gm, val);\r\n    }\r\n    this.sqlHelp.getRowsBySql(sql).then(rows => {\r\n      this.items = [].concat(rows);\r\n    });\r\n  }\r\n\r\n  onSearch(event) {\r\n    if (this.searchKey.length < 1) return;\r\n    this.inputTime = event.timeStamp;\r\n    setTimeout(() => {\r\n      if (event.timeStamp == this.inputTime) {\r\n        console.info(\"search...\");\r\n        this.getData(true);\r\n      }\r\n    }, 500);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/work/stk-log-list/stk-log-list.ts"],"sourceRoot":""}