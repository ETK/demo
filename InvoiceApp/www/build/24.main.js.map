{"version":3,"sources":["../../src/pages/work/choose-goods/choose-goods.module.ts","../../src/pages/work/choose-goods/choose-goods.ts"],"names":[],"mappings":"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","file":"24.main.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { ChooseGoodsPage } from './choose-goods';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        ChooseGoodsPage,\r\n    ],\r\n    imports: [\r\n        IonicPageModule.forChild(ChooseGoodsPage),\r\n    ],\r\n    exports: [\r\n        ChooseGoodsPage\r\n    ]\r\n})\r\nexport class ChooseGoodsPageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/work/choose-goods/choose-goods.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage,NavController, NavParams, ViewController, ModalController } from 'ionic-angular';\r\nimport { SqlService } from \"../../../providers/sql-service\";\r\nimport { UtilService } from \"../../../providers/util-service\";\r\n/*\r\n  选择商品页面.\r\n  wudefeng\r\n  2017-05-11\r\n*/\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-choose-goods',\r\n  templateUrl: 'choose-goods.html'\r\n})\r\nexport class ChooseGoodsPage {  \r\n  items: any[] = [];  \r\n \r\n  constructor(\r\n    public navCtrl: NavController,\r\n    public navParams: NavParams,\r\n    public sqlHelp: SqlService,\r\n    public modalCtrl: ModalController,\r\n    public viewCtrl: ViewController,\r\n    public util: UtilService\r\n  ) { }\r\n\r\n  ionViewDidLoad() {\r\n    this.getData();     \r\n  }\r\n\r\n  getData() {\r\n    this.sqlHelp.getRowsByTable('good').then((data) => {\r\n      this.items = [].concat(data);    \r\n      let choosed = this.navParams.get(\"choosed\"),item:any;\r\n      if (choosed) {\r\n        for (let obj of choosed) {\r\n          if (obj.qty && obj.good_no) {\r\n            item = this.items.find((i) => { return i.good_no == obj.good_no });\r\n            if (item) {\r\n              item.input_qty = obj.qty;\r\n             }\r\n           }\r\n         }\r\n      }\r\n    });\r\n  }\r\n\r\n  addItem() {\r\n    var page = this.modalCtrl.create('GoodsEditPage');\r\n    page.onDidDismiss(() => { this.getData() })\r\n    page.present();\r\n  } \r\n\r\n  changeQty(item:any,direct:number) {\r\n    let qty = (Number(item.input_qty) || 0) + direct;\r\n    if (qty >= 0) { item.input_qty = qty; }   \r\n  }\r\n\r\n  inputQty(item: any) {\r\n    this.util.showPrompt('', '输入数量', [{ name: 'qty', placeholder: '请输入数量', type: 'number' }], data => {\r\n      let qty = Number(data.qty);\r\n      if (qty > 0) {\r\n        item.input_qty = qty;\r\n      } else {\r\n        delete item.input_qty;\r\n      }  \r\n    });      \r\n  }\r\n\r\n  getChooseItem() {\r\n    return this.items.filter((item, index) => {\r\n      return item.input_qty > 0;\r\n    });\r\n  }\r\n\r\n  confirmChoose() {\r\n    this.viewCtrl.dismiss(this.getChooseItem());\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/work/choose-goods/choose-goods.ts"],"sourceRoot":""}