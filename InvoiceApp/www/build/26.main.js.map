{"version":3,"sources":["../../src/pages/setting/setting.module.ts","../../src/pages/setting/setting.ts"],"names":[],"mappings":"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","file":"26.main.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { SettingPage } from './setting';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        SettingPage,\r\n    ],\r\n    imports: [\r\n        IonicPageModule.forChild(SettingPage),\r\n    ],\r\n    exports: [\r\n        SettingPage\r\n    ]\r\n})\r\nexport class SettingPageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/setting/setting.module.ts","import {Component} from '@angular/core';\r\nimport {ImagePicker} from '@ionic-native/image-picker';\r\nimport {Camera, CameraOptions} from '@ionic-native/camera';\r\nimport {IonicPage,NavController, Platform} from 'ionic-angular';\r\nimport {UtilService} from '../../providers/util-service';\r\nimport {SqlService} from '../../providers/sql-service';\r\nimport {UpdateService} from '../../providers/update-service';\r\nimport {ActionSheetController} from 'ionic-angular';\r\n\r\n@IonicPage()\r\n@Component({\r\n    selector: 'page-setting',\r\n    templateUrl: 'setting.html'\r\n})\r\nexport class SettingPage {\r\n    user: any = {};\r\n    isMesChecked:boolean;\r\n\r\n    constructor(public navCtrl: NavController,\r\n                private utilService: UtilService,\r\n                private sqlService: SqlService,\r\n                private imagePicker: ImagePicker,\r\n                private actionSheetCtrl: ActionSheetController,\r\n                private camera: Camera,\r\n                private updateService: UpdateService,\r\n                private platform: Platform) {\r\n        this.initData();\r\n    }\r\n\r\n    initData() {\r\n        this.utilService.getByKey('userName').then((result) => {\r\n            this.user.username = result;\r\n        });\r\n        let date = new Date();\r\n        this.user.loginTime = this.utilService.formatDate(date);\r\n        this.utilService.getByKey('userNo').then((result) => {\r\n            this.user.userNo = result;\r\n        });\r\n        this.utilService.getByKey('userAvavar').then((result) => {\r\n            this.user.avatarUrl = result;\r\n        });\r\n        this.utilService.getByKey('alarmFlag').then((result) => {\r\n            this.isMesChecked = result;\r\n        });\r\n\r\n\r\n    }\r\n\r\n    modifyAvatar() {\r\n        //修改头像\r\n        const actionSheet = this.actionSheetCtrl.create({\r\n            buttons: [\r\n                {\r\n                    text: '拍照',\r\n                    role: '拍照',\r\n                    handler: () => {\r\n                        this.cameraFun();\r\n                    }\r\n                },\r\n                {\r\n                    text: '相册',\r\n                    role: '相册',\r\n                    handler: () => {\r\n                        this.imagePickerFun();\r\n                    }\r\n                },\r\n                {\r\n                    text: '取消',\r\n                    role: 'cancel',\r\n                    handler: () => {\r\n                        console.log('Cancel clicked');\r\n                    }\r\n                }\r\n            ]\r\n        });\r\n        actionSheet.present();\r\n\r\n\r\n    }\r\n\r\n    imagePickerFun() {\r\n        let imagePickerOpt = {\r\n            maximumImagesCount: 1,//选择一张图片\r\n            width: 200,\r\n            height: 200,\r\n            quality: 100\r\n        };\r\n        this.imagePicker.getPictures(imagePickerOpt).then((results) => {\r\n            for (var i = 0; i < results.length; i++) {\r\n                console.log('Image URI: ' + results[i]);\r\n                this.user.avatarUrl = results[i];\r\n                this.addImg(results[i]);\r\n            }\r\n        }, (err) => {\r\n            this.utilService.showToast(err);\r\n        });\r\n\r\n    }\r\n\r\n    cameraFun() {\r\n        const options: CameraOptions = {\r\n            quality: 100,\r\n            destinationType: this.camera.DestinationType.FILE_URI,\r\n            encodingType: this.camera.EncodingType.JPEG,\r\n            mediaType: this.camera.MediaType.PICTURE\r\n        };\r\n\r\n        this.camera.getPicture(options).then((imageData) => {\r\n            // imageData is either a base64 encoded string or a file URI\r\n            // If it's base64:\r\n            // let base64Image = 'data:image/jpeg;base64,' + imageData;\r\n            this.utilService.refreshUI(() => {\r\n                this.user.avatarUrl = imageData;\r\n                this.addImg(imageData);\r\n            });\r\n        }, (err) => {\r\n            // Handle error\r\n            this.utilService.showToast(err);\r\n        });\r\n\r\n    }\r\n\r\n    addImg(imageData) {\r\n        let sql = \"update user set img='\" + imageData + \"' where user_no='\" + this.user.userNo + \"'\";\r\n        this.sqlService.execSql(sql, []);\r\n    };\r\n\r\n    changeToggle(event) {\r\n        this.utilService.setByKey('alarmFlag',event.checked);\r\n    };\r\n\r\n    modifyPassword() {\r\n        //修改密码\r\n        this.navCtrl.push('ModifyPasswordPage', {'userNo': this.user.userNo});\r\n    };\r\n\r\n    clearCache() {\r\n        //清除缓存\r\n        /**\r\n         * 1.storge :暂时不能清除登录用户的信息\r\n         * 2.否则，只能在这里退出app\r\n         */\r\n        /*  this.utilService.storageClear().then(()=>{\r\n         setTimeout(()=>{\r\n         this.utilService.showToast(\"数据清除成功\");\r\n         },500)\r\n         }\r\n         );*/\r\n\r\n        this.utilService.showConfirm('是否清楚所有本地数据?', '清除数据', () => {\r\n            this.utilService.showLoading();\r\n            this.sqlService.dropTable(true);\r\n           /* setTimeout(() => {\r\n                this.sqlService.initUserData();\r\n                this.sqlService.initBaseData();\r\n\r\n            }, 1000)*/\r\n            setTimeout(() => {\r\n                this.utilService.hideLoading();\r\n                this.utilService.showToast(\"数据清除成功\");\r\n            }, 2000)\r\n\r\n        })\r\n\r\n    };\r\n\r\n\r\n\r\n    updateApp() {\r\n        //检查更新\r\n        //this.updateService.checkUpdate('setting');\r\n    };\r\n\r\n    aboutAs() {\r\n        //关于我们\r\n        this.navCtrl.push('AboutUsPage');\r\n    };\r\n\r\n    logOut() {\r\n        //退出登录\r\n        if (this.utilService.getPlatform() == 'mobile') {\r\n            this.utilService.showConfirm('是否退出本应用?', '退出', () => {\r\n                this.utilService.removeByKey('passWord');\r\n                this.utilService.removeByKey('userName');\r\n                this.platform.exitApp();\r\n            })\r\n        }\r\n\r\n    };\r\n\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/setting/setting.ts"],"sourceRoot":""}