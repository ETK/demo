{"version":3,"sources":["../../src/pages/setting/modify-password/modify-password.module.ts","../../src/pages/setting/modify-password/modify-password.ts"],"names":[],"mappings":"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","file":"27.main.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { ModifyPasswordPage } from './modify-password';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        ModifyPasswordPage,\r\n    ],\r\n    imports: [\r\n        IonicPageModule.forChild(ModifyPasswordPage),\r\n    ],\r\n    exports: [\r\n        ModifyPasswordPage\r\n    ]\r\n})\r\nexport class ModifyPasswordPageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/setting/modify-password/modify-password.module.ts","import {Component} from '@angular/core';\r\nimport {IonicPage,NavController, NavParams, App} from 'ionic-angular';\r\n\r\nimport {UtilService} from '../../../providers/util-service';\r\nimport {SqlService} from \"../../../providers/sql-service\";\r\n\r\n\r\n/*\r\n Generated class for the ModifyPassword page.\r\n\r\n See http://ionicframework.com/docs/v2/components/#navigation for more info on\r\n Ionic pages and navigation.\r\n */\r\n@IonicPage()\r\n@Component({\r\n    selector: 'page-modify-password',\r\n    templateUrl: 'modify-password.html'\r\n})\r\nexport class ModifyPasswordPage {\r\n    user: any = {};\r\n    userNo: string;\r\n\r\n    constructor(public navCtrl: NavController,\r\n                public navParams: NavParams,\r\n                private app: App,\r\n                private sqlService: SqlService,\r\n                private  utilService: UtilService) {\r\n        this.userNo = navParams.get('userNo');\r\n    }\r\n\r\n    save() {\r\n        if (!this.user.oldPassword || !this.user.newPassword || !this.user.new2Password) {\r\n            this.utilService.showToast(\"密码不能为空\");\r\n        } else if (this.user.newPassword != this.user.new2Password) {\r\n            this.user.newPassword = '';\r\n            this.user.new2Password = '';\r\n            this.utilService.showToast(\"2次密码不一样\");\r\n        } else if (this.user.oldPassword === this.user.newPassword) {\r\n            this.user.newPassword = '';\r\n            this.user.new2Password = '';\r\n            this.utilService.showToast(\"新密码不能和原密码一样\");\r\n        } else {\r\n            this.utilService.getByKey(\"passWord\").then((passWord) => {\r\n                if (this.user.oldPassword != passWord) {\r\n                    this.utilService.showToast(\"原密码错误\");\r\n                } else {\r\n                    //请求接口修改密码\r\n                    this.modifyPwdFun();\r\n                }\r\n\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n    modifyPwdFun() {\r\n        let sql = \"update user set password='\" + this.user.new2Password + \"' where user_no='\" + this.userNo + \"'\";\r\n        this.sqlService.execSql(sql, []).then(() => {\r\n            this.utilService.removeByKey('passWord').then(()=>{\r\n                this.utilService.showToast(\"修改成功!\");\r\n                setTimeout(()=>{\r\n                    this.app.getRootNav().setRoot('LoginPage');\r\n                },500);\r\n\r\n            })\r\n        }).catch((err) => {\r\n            console.error(err);\r\n        });\r\n\r\n    }\r\n\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/setting/modify-password/modify-password.ts"],"sourceRoot":""}