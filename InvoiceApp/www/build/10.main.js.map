{"version":3,"sources":["../../src/pages/work/stk-check/stk-check.module.ts","../../src/pages/work/stk-check/stk-check.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACL;AAa3C,IAAa,kBAAkB;IAA/B;IAAiC,CAAC;IAAD,yBAAC;AAAD,CAAC;AAArB,kBAAkB;IAX9B,sFAAQ,CAAC;QACN,YAAY,EAAE;YACV,gEAAY;SACf;QACD,OAAO,EAAE;YACL,sEAAe,CAAC,QAAQ,CAAC,gEAAY,CAAC;SACzC;QACD,OAAO,EAAE;YACL,gEAAY;SACf;KACJ,CAAC;GACW,kBAAkB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;ACfW;AAC0C;AACxB;AAE5D;;;;EAIE;AAMF,IAAa,YAAY;IAMvB,sBACS,OAAsB,EACtB,SAAoB,EACpB,SAA0B,EAC1B,OAAmB;QAHnB,YAAO,GAAP,OAAO,CAAe;QACtB,cAAS,GAAT,SAAS,CAAW;QACpB,cAAS,GAAT,SAAS,CAAiB;QAC1B,YAAO,GAAP,OAAO,CAAY;QAR5B,UAAK,GAAU,EAAE,CAAC;QAClB,cAAS,GAAW,EAAE,CAAC;IAQnB,CAAC;IAEL,qCAAc,GAAd;QACE,IAAI,CAAC,OAAO,EAAE,CAAC;IACjB,CAAC;IAED,8BAAO,GAAP,UAAQ,GAAQ;QACd,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,mBAAmB,EAAE,EAAE,IAAI,EAAE,GAAG,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC,CAAC;IAC1E,CAAC;IAED,8BAAO,GAAP,UAAQ,QAAsB;QAA9B,iBAgBC;QAhBO,2CAAsB;QAC5B,IAAI,GAAG,GAAG,6UAIoC,CAAC;QAC/C,EAAE,CAAC,CAAC,QAAQ,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;YAC/B,IAAI,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC;YACzB,GAAG,IAAI,0GAA0G,CAAC,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;QACxI,CAAC;QACD,GAAG,IAAI,qBAAqB,CAAC;QAC7B,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,cAAI;YACtC,KAAI,CAAC,KAAK,GAAG,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAC/B,CAAC,CAAC,CAAC,KAAK,CAAC,aAAG;YACV,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACzB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,+BAAQ,GAAR,UAAS,MAAM;QAAf,iBAQC;QAPC,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC,SAAS,CAAC;QAClC,UAAU,CAAC;YACT,EAAE,CAAC,CAAC,MAAM,CAAC,SAAS,IAAI,KAAI,CAAC,SAAS,CAAC,CAAC,CAAC;gBACvC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;gBAC1B,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YACrB,CAAC;QACH,CAAC,EAAE,GAAG,CAAC,CAAC;IACV,CAAC;IACH,mBAAC;AAAD,CAAC;AAhDY,YAAY;IALxB,uFAAS,EAAE;IACX,wFAAS,CAAC;QACT,QAAQ,EAAE,gBAAgB;OACG;KAC9B,CAAC;yEAQ+B;QACX,sEAAS;QACT,4EAAe;QACjB,SAAU;AAsC7B;SAhDY,YAAY,gB","file":"10.main.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { StkCheckPage } from './stk-check';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        StkCheckPage,\r\n    ],\r\n    imports: [\r\n        IonicPageModule.forChild(StkCheckPage),\r\n    ],\r\n    exports: [\r\n        StkCheckPage\r\n    ]\r\n})\r\nexport class StkCheckPageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/work/stk-check/stk-check.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage,NavController, NavParams, ModalController } from 'ionic-angular';\r\nimport { SqlService } from '../../../providers/sql-service';\r\n\r\n/*\r\n   盘点录入单\r\n  wudefeng\r\n  2017-05-12\r\n*/\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-stk-check',\r\n  templateUrl: 'stk-check.html'\r\n})\r\nexport class StkCheckPage {\r\n\r\n  items: any[] = [];\r\n  searchKey: string = \"\";\r\n  inputTime: any;\r\n\r\n  constructor(\r\n    public navCtrl: NavController,\r\n    public navParams: NavParams,\r\n    public modalCtrl: ModalController,\r\n    public sqlHelp: SqlService\r\n  ) { }\r\n\r\n  ionViewDidLoad() {\r\n    this.getData();\r\n  }\r\n\r\n  addItem(obj: any) {\r\n    this.navCtrl.push('StkCheckInputPage', { item: obj, parentPage: this });\r\n  }\r\n\r\n  getData(isfilter:boolean=false) {\r\n    let sql = `select a.bill_no,store_no, a.create_time,c.depot_name as store_name,a.bill_status,\r\n               sum((b.input_qty-b.stk_qty)*b.cost) as totalCost\r\n             from bl_stk_check a join bl_stk_check_dtl b on a.bill_no=b.bill_no\r\n             join depot c on a.store_no=c.depot_no\r\n             join good d on b.good_no = d.good_no`;             \r\n    if (isfilter && this.searchKey) {\r\n      let val = this.searchKey;\r\n      sql += \" and (a.bill_no like '%?%' or c.depot_name like '%?%' or d.good_no like '%?%' or d.good_name like '%?%')\".replace(/\\?/g, val);\r\n    }\r\n    sql += ' group by a.bill_no';\r\n    this.sqlHelp.getRowsBySql(sql).then(rows => {\r\n      this.items = [].concat(rows);\r\n    }).catch(err => {\r\n      console.error(err.err);\r\n    });\r\n  }\r\n\r\n  onSearch($event) {\r\n    this.inputTime = $event.timeStamp;\r\n    setTimeout(() => {\r\n      if ($event.timeStamp == this.inputTime) {\r\n        console.info(\"search...\");\r\n        this.getData(true);\r\n      }\r\n    }, 500);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/work/stk-check/stk-check.ts"],"sourceRoot":""}