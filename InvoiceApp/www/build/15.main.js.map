{"version":3,"sources":["../../src/pages/work/purchase-order-list/purchase-order-list.module.ts","../../src/pages/work/purchase-order-list/purchase-order-list.ts"],"names":[],"mappings":"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","file":"15.main.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { PurchaseOrderListPage } from './purchase-order-list';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        PurchaseOrderListPage,\r\n    ],\r\n    imports: [\r\n        IonicPageModule.forChild(PurchaseOrderListPage),\r\n    ],\r\n    exports: [\r\n        PurchaseOrderListPage\r\n    ]\r\n})\r\nexport class PurchaseOrderListPageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/work/purchase-order-list/purchase-order-list.module.ts","import { Component ,NgZone} from '@angular/core';\r\nimport { IonicPage,NavController, NavParams,ModalController } from 'ionic-angular';\r\nimport {UtilService} from '../../../providers/util-service';\r\nimport { SqlService } from '../../../providers/sql-service';\r\nimport { SupplierService} from '../../../providers/supplier-service';\r\n/*\r\n  Generated class for the PurchaseOrderList page.\r\n\r\n  See http://ionicframework.com/docs/v2/components/#navigation for more info on\r\n  Ionic pages and navigation.\r\n*/\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-purchase-order-list',\r\n  templateUrl: 'purchase-order-list.html'\r\n})\r\nexport class PurchaseOrderListPage {\r\n\r\n\r\n  items: any;\r\n  placeholder: string;\r\n  myInput: string;\r\n  totalData: any;\r\n  operation:string = 'add';\r\n  private searchKey:string=\"\";\r\n  tableName:string = \"purchase_order\";\r\n  public selectItems:any = [];\r\n  constructor(public navCtrl: NavController,public  util: UtilService , public navParams: NavParams, private _ngZone: NgZone,\r\n              public sqlHelp:SqlService,public custService:SupplierService,public modalCtrl: ModalController) {\r\n    this.placeholder = '请输入关键字';\r\n    this.myInput  = '';\r\n\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    //刷新\r\n    this.getData();\r\n  }\r\n\r\n\r\n\r\n  getData() {\r\n    this.items = [];\r\n    var condition=\"\";\r\n    if(this.searchKey){\r\n      condition = \"bill_no like '%\"+condition+\"%'\";\r\n    }\r\n    this.sqlHelp.query(this.tableName, condition).then(data => {\r\n      if (data.res.rows.length > 0) {\r\n        this.totalData = this.util.sqliteToArrqy(data.res.rows);\r\n        this.items = this.totalData;\r\n      }\r\n    });\r\n  }\r\n\r\n  addItem(){\r\n\r\n    let addModal = this.modalCtrl.create('PurchaseOrderDetailPage',{operation:false});\r\n    addModal.onDidDismiss(item => {\r\n      if (item) {\r\n        this.getData();\r\n      }\r\n    })\r\n    addModal.present();\r\n  }\r\n\r\n  editItem(item) {\r\n    this.navCtrl.push('PurchaseOrderDetailPage', {detail:item,operation:true});\r\n  }\r\n\r\n  itemDetail(item){\r\n    this.operation = 'detail';\r\n    this.navCtrl.push('PurchaseOrderDetailPage', {detail:{supplier_no:'A0001',supplier_name:'明细'},operation:this.operation});\r\n  }\r\n\r\n  deleteItem(item) {\r\n    this.util.showConfirm('提示', '确定要删除此条数据?', () => {\r\n      //delete到数据库\r\n      var condition=\"\";\r\n      condition = \"bill_no = '\"+item.bill_no+\"'\";\r\n      this.sqlHelp.remove(this.tableName, condition).then(data => {\r\n        this.getData();\r\n      });\r\n    });\r\n\r\n  }\r\n  deleteAllItem(){\r\n    if(this.selectItems.length <= 0  ){this.util.showAlert(\"请选中要删除的数据\");return false;}\r\n    this.util.showConfirm('提示', '确定要删除选中的数据?', () => {\r\n      //delete到数据库\r\n      var condition=\"bill_no in (\";\r\n      for (let data of this.selectItems) {\r\n        condition += \" '\"+data+\"',\";\r\n      }\r\n      condition = condition.substring(0,condition.length-1);\r\n      condition += \") \"\r\n      this.sqlHelp.remove(this.tableName, condition).then(data => {\r\n        this.selectItems = [];\r\n        this.getData();\r\n      });\r\n    });\r\n  }\r\n  onInput() {\r\n    let array: any = [];\r\n    for (let data of this.items) {\r\n      if (data.supplier_name.indexOf(this.myInput) >= 0 || data.supplier_no.indexOf(this.myInput) >= 0) {\r\n        array.push(data);\r\n      }\r\n    }\r\n    //console.log(array);\r\n    this._ngZone.run(() => {\r\n      this.items = array;\r\n    });\r\n\r\n  }\r\n  insertUserToArray(item,enent){\r\n    if(enent.checked){\r\n      this.selectItems.push(item.bill_no);\r\n    }else{\r\n      this.selectItems.splice(this.selectItems.indexOf(item.bill_no),1)\r\n    }\r\n  }\r\n  onClear() {\r\n    this.items = this.totalData;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/work/purchase-order-list/purchase-order-list.ts"],"sourceRoot":""}