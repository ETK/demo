{"version":3,"sources":["../../src/pages/work/stk-list/stk-list.module.ts","../../src/pages/work/stk-list/stk-list.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACP;AAazC,IAAa,iBAAiB;IAA9B;IAAgC,CAAC;IAAD,wBAAC;AAAD,CAAC;AAApB,iBAAiB;IAX7B,sFAAQ,CAAC;QACN,YAAY,EAAE;YACV,8DAAW;SACd;QACD,OAAO,EAAE;YACL,sEAAe,CAAC,QAAQ,CAAC,8DAAW,CAAC;SACxC;QACD,OAAO,EAAE;YACL,8DAAW;SACd;KACJ,CAAC;GACW,iBAAiB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;ACfU;AAC0C;AACxB;AAC1D;;;;;GAKG;AAMH,IAAa,WAAW;IAMtB,qBAAmB,OAAsB,EACtB,SAAoB,EACpB,SAA0B,EAC1B,UAAsB;QAHtB,YAAO,GAAP,OAAO,CAAe;QACtB,cAAS,GAAT,SAAS,CAAW;QACpB,cAAS,GAAT,SAAS,CAAiB;QAC1B,eAAU,GAAV,UAAU,CAAY;QAPjC,YAAO,GAAU,EAAE,CAAC;QACpB,cAAS,GAAW,EAAE,CAAC;IAO/B,CAAC;IAED,oCAAc,GAAd;QACE,IAAI,CAAC,OAAO,EAAE,CAAC;IACjB,CAAC;IAED,6BAAO,GAAP,UAAQ,QAAsB;QAA9B,iBAYC;QAZO,2CAAsB;QAC5B,IAAI,MAAM,GAAG,2MAGW,CAAC;QACzB,EAAE,CAAC,CAAC,QAAQ,IAAI,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAC1C,IAAI,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,KAAK,EAAC,IAAI,CAAC,CAAC;YAC7C,MAAM,IAAI,kFAAkF,CAAC,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;QACnH,CAAC;QACD,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,cAAI;YAC5C,KAAI,CAAC,OAAO,GAAG,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACjC,CAAC,CAAC,CAAC;IACL,CAAC;IAED,8BAAQ,GAAR,UAAS,KAAK;QAAd,iBASC;QARC,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC;YAAC,MAAM,CAAC;QACtC,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC,SAAS,CAAC;QACjC,UAAU,CAAC;YACT,EAAE,CAAC,CAAC,KAAK,CAAC,SAAS,IAAI,KAAI,CAAC,SAAS,CAAC,CAAC,CAAC;gBACtC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;gBAC1B,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YACrB,CAAC;QACH,CAAC,EAAE,GAAG,CAAC,CAAC;IACV,CAAC;IACH,kBAAC;AAAD,CAAC;AAxCY,WAAW;IALvB,uFAAS,EAAE;IACX,wFAAS,CAAC;QACT,QAAQ,EAAE,eAAe;OACG;KAC7B,CAAC;yEAOyC;QACX,sEAAS;QACT,4EAAe;QACd,QAAU;AA+B1C;SAxCY,WAAW,gB","file":"9.main.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { StkListPage } from './stk-list';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        StkListPage,\r\n    ],\r\n    imports: [\r\n        IonicPageModule.forChild(StkListPage),\r\n    ],\r\n    exports: [\r\n        StkListPage\r\n    ]\r\n})\r\nexport class StkListPageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/work/stk-list/stk-list.module.ts","import {Component} from '@angular/core';\r\nimport {IonicPage,NavController, NavParams, ModalController} from 'ionic-angular';\r\nimport {SqlService} from '../../../providers/sql-service';\r\n/*\r\n Generated class for the StkList page.\r\n\r\n See http://ionicframework.com/docs/v2/components/#navigation for more info on\r\n Ionic pages and navigation.\r\n */\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-stk-list',\r\n  templateUrl: 'stk-list.html'\r\n})\r\nexport class StkListPage {\r\n\r\n  private stkList: any[] = [];\r\n  private searchKey: string = \"\";\r\n  private inputTime: any;\r\n\r\n  constructor(public navCtrl: NavController,\r\n              public navParams: NavParams,\r\n              public modalCtrl: ModalController,\r\n              public sqlService: SqlService) {\r\n  }\r\n\r\n  ionViewDidLoad() {   \r\n    this.getData();\r\n  } \r\n\r\n  getData(isFilter:boolean=false) {   \r\n    let sqlStr = `select a.*,b.good_name,depot_name as store_name \r\n                  from stk a join good b on a.good_no=b.good_no\r\n                  join depot c on a.store_no=c.depot_no  \r\n                  where 1=1`;\r\n    if (isFilter && this.searchKey.length > 0) {\r\n      let key = this.searchKey.replace(/\\'/g,\"''\");\r\n      sqlStr += \" and (a.good_no like '%?%' or b.good_name like '%?%' or c.depot_name like '%?%')\".replace(/\\?/g, key);\r\n    }\r\n    this.sqlService.getRowsBySql(sqlStr).then(data => {\r\n      this.stkList = [].concat(data);\r\n    });\r\n  }\r\n\r\n  onSearch(event) {\r\n    if (this.searchKey.length < 1) return;\r\n    this.inputTime = event.timeStamp;\r\n    setTimeout(() => {\r\n      if (event.timeStamp == this.inputTime) {\r\n        console.info(\"search...\");\r\n        this.getData(true);\r\n      }\r\n    }, 500);   \r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/work/stk-list/stk-list.ts"],"sourceRoot":""}